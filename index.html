<!DOCTYPE html>
<html lang="en">
<head>
<title>Poker Banker</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
* {
  box-sizing: border-box;
  font-family: Arial, Helvetica, sans-serif;
}

body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
}

/* Navigation bar */
.topnav {
  overflow: hidden;
  background-color: #333;
}

/* Navigation bar style */
.topnav a {
  float: left;
  display: block;
  color: #f2f2f2;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
}

/* Change color on hover of navigation */
.topnav a:hover {
  background-color: #ddd;
  color: black;
}

/* Style the content */
.header {
  padding: px;
  text-align: center;
}

/* Leftside of webpage */
.leftside {
  float: left;
  margin-top: 30px;
  margin-left: 50px;
}

.rightside {
  float: right;
  margin-top: 30px;
  margin-right: 240px;
}

.firstplayerinput {
    float: top;
    margin-top: 100px;
    margin-left: 20px;
    outline: none;
    box-sizing: border-box;
}

.playerinput {
    float: top;
    margin-top: 20px;
    margin-left: 20px;
    outline: none;
    box-sizing: border-box;
}

.firstplinput {
    float: right;
    margin-top: 20px;
    margin-right: 500px;
    outline: none;
    box-sizing: border-box;
}

</style>
</head>
<body>

<div class="topnav">
  <a href="#">About us</a>
  <a href="#">Banker</a>
</div>

<div class="header">
  <h2>Poker Banker</h2>
</div>

<div class="leftside">
    <p>Input names and P/L</p>
    <p><span><input type="text" id="name1" placeholder="insert player name..."> <input type="float" id="pl1" placeholder="insert P/L of player..."> </span> </p>
    <p><span><input type="text" id="name2" placeholder="player 2">  <input type="float" id="pl2" placeholder="P/L player 2"> </span> </p>
    <p><span><input type="text" id="name3" placeholder="player 3">  <input type="float" id="pl3" placeholder="P/L player 3"> </span> </p>
    <p><span><input type="text" id="name4" placeholder="player 4">  <input type="float" id="pl4" placeholder="P/L player 4"> </span> </p>
    <p><span><input type="text" id="name5" placeholder="player 5">  <input type="float" id="pl5" placeholder="P/L player 5"> </span> </p>
    <button onclick="getNumbers()">Calculate!</button>
</div>

<script>
  function getNumbers() {
    //let input = document.getElementById("name1");
    var players = [document.getElementById("name1").value, document.getElementById("name2").value, 
    document.getElementById("name3").value, document.getElementById("name4").value, 
    document.getElementById("name5").value];
    var numbers = [document.getElementById("pl1").value, document.getElementById("pl2").value, 
    document.getElementById("pl3").value, document.getElementById("pl4").value, 
    document.getElementById("pl5").value];
    algorithm(players, numbers);
  }

  function algorithm(players, numbers) {
    document.getElementById("demo").innerHTML = players;
    var numbersArray = numbers.map(Number);
    if (checkValid(numbersArray) == false) {
      document.getElementById("demo1").innerHTML = "Numbers do not add up to 0, try again.";
    }
    //losersArrayNumbers = findLosersArray(numbersArray);
    winnersDict = findWinners(players, numbersArray);
    losersDict = findLosers(players, numbersArray);
    numbersArray.sort(function(a, b){return a - b});
    document.getElementById("demo2").innerHTML = numbersArray;
    var winnersNumbers = findWinnersArray(numbersArray);
    document.getElementById("demo6").innerHTML = winnersNumbers;
    var losersNumbers = findLosersArray(numbersArray)
    document.getElementById("demo7").innerHTML = losersNumbers;
    var winnersNames = findWinnersNames(winnersNumbers, winnersDict);
    document.getElementById("demo8").innerHTML = winnersNames;
    var losersNames = findLosersNames(losersNumbers, losersDict);
    document.getElementById("demo9").innerHTML = losersNames;
    calculate(winnersNames, losersNames, winnersNumbers, losersNumbers);
  }

  function calculate(winnersNames, losersNames, winnersNumbers, losersNumbers) {
    var result = {};
    //document.getElementById("demo10").innerHTML = JSON.stringify(result, null, numbers.length-1);
    var i = 0;
    var j = 0;
    var loserString = [];
    while (i < losersNames.length && j < winnersNames.length) {
      if (losersNumbers[i] + winnersNumbers[j] == 0) {
        //document.getElementById("demo11").innerHTML = "they are equal";
        loserString.push(losersNames[i].concat(' ', -losersNumbers[i].toString(10)));
        //document.getElementById("demo12").innerHTML = loserString;
        result[winnersNames[j]] = loserString;
        //document.getElementById("demo13").innerHTML = JSON.stringify(result, null, losersNames.length);
        loserString = [];
        //document.getElementById("demo14").innerHTML = loserString;
        i++;
        j++;
      } else if ((losersNumbers[i] + winnersNumbers[j]) < 0) {
        losersNumbers[i] = losersNumbers[i] + winnersNumbers[j];
        loserString.push(losersNames[i].concat(' ', winnersNumbers[j].toString(10)));
        result[winnersNames[j]] = loserString;
        loserString = [];
        document.getElementById("demo14").innerHTML = JSON.stringify(result, null, losersNames.length);
        j++;
      } else if (losersNumbers[i] + winnersNumbers[j] > 0) {
        loserString.push(losersNames[i].concat(' ', -losersNumbers[i].toString(10)));
        winnersNumbers[j] = winnersNumbers[j] + losersNumbers[i];
        i++;
      }
    }
    document.getElementById("demo13").innerHTML = JSON.stringify(result, null, losersNames.length);
    return result;
  }
  function findWinnersNames(winnersNumbers, winnersDict) {
    var i;
    var winnersNames = new Array(winnersNumbers.length);
    for (i = 0; i < winnersNumbers.length; i++) {
      winnersNames[i] = winnersDict[winnersNumbers[i]];
    }
    return winnersNames;
  }

  function findLosersNames(losersNumbers, losersDict) {
    var i;
    var losersNames = new Array(losersNumbers.length);
    for (i = 0; i < losersNumbers.length; i++) {
      losersNames[i] = losersDict[losersNumbers[i]];
    }
    return losersNames;
  }



  function checkValid(numbers) {
    var i;
    var result = 0;
    for (i = 0; i < numbers.length; i++) {
      result += numbers[i];
    }
    if (result == 0) {
      return true;
    }
    return false;
  }

  function findWinnersArray(numbers) {
    var i;
    var count = 0;
    for (i = 0; i < numbers.length; i++) {
      if (numbers[i] > 0) {
        count += 1;
      }
    }
    var winnersArray = numbers.splice(-count);
    return winnersArray.reverse();
  }

  function findLosersArray(numbers) {
    var i;
    var count = 0;
    for (i = 0; i < numbers.length; i++) {
      if (numbers[i] < 0) {
        count += 1;
      }
    }
    return numbers.slice(0,count);
  }

  function findWinners(players, numbers) {
    var i;
    var winners = {};
    for (i = 0; i < numbers.length; i++) {
      if (numbers[i] > 0) {
        winners[numbers[i]] = players[i];
      }
    }
    document.getElementById("demo3").innerHTML = JSON.stringify(winners, null, numbers.length-1);
    return winners;
  }

  function findLosers(players, numbers) {
    var i;
    var losers = {};
    for (i = 0; i < numbers.length; i++) {
      if (numbers[i] < 0) {
        losers[numbers[i]] = players[i];
      }
    }
    document.getElementById("demo4").innerHTML = JSON.stringify(losers, null, numbers.length-1);
    return losers;
  }

  </script>

<div class="rightside">
    <p>Result<p>
    <p id="demo"></p>
    <p id="demo1"></p>
    <p id="demo2"></p>
    <p id="demo3"></p>
    <p id="demo4"></p>
    <p id="demo5"></p>
    <p id="demo6"></p>
    <p id="demo7"></p>
    <p id="demo8"></p>
    <p id="demo9"></p>
    <p id="demo10"></p>
    <p id="demo11"></p>
    <p id="demo12"></p>
    <p id="demo13"></p>
    <p id="demo14"></p>
    <p id="demo15"></p>
    <p id="demo16"></p>
</div>

</body>
</html>
