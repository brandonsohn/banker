<!DOCTYPE html>
<html lang="en">
<head>
<title>Poker Banker</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
* {
  box-sizing: border-box;
  font-family: Arial, Helvetica, sans-serif;
}

body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
}

/* Navigation bar */
.topnav {
  overflow: hidden;
  background-color: #333;
}

/* Navigation bar style */
.topnav a {
  float: left;
  display: block;
  color: #f2f2f2;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
}

/* Change color on hover of navigation */
.topnav a:hover {
  background-color: #ddd;
  color: black;
}

/* Style the content */
.header {
  padding: px;
  text-align: center;
}

/* Leftside of webpage */
.leftside {
  float: left;
  margin-top: 30px;
  margin-left: 50px;
}

.rightside {
  float: right;
  margin-top: 30px;
  margin-right: 240px;
}

.firstplayerinput {
    float: top;
    margin-top: 100px;
    margin-left: 20px;
    outline: none;
    box-sizing: border-box;
}

.playerinput {
    float: top;
    margin-top: 20px;
    margin-left: 20px;
    outline: none;
    box-sizing: border-box;
}

.firstplinput {
    float: right;
    margin-top: 20px;
    margin-right: 500px;
    outline: none;
    box-sizing: border-box;
}

</style>
</head>
<body>

<div class="topnav">
  <a href="#">About us</a>
  <a href="#">Banker</a>
</div>

<div class="header">
  <h2>Poker Banker</h2>
</div>

<div class="leftside">
    <p>Input names and P/L</p>
    <p><span><input type="text" id="name1" placeholder="insert player name..."> <input type="float" id="pl1" placeholder="insert P/L of player..."> </span> </p>
    <p><span><input type="text" id="name2" placeholder="player 2">  <input type="float" id="pl2" placeholder="P/L player 2"> </span> </p>
    <p><span><input type="text" id="name3" placeholder="player 3">  <input type="float" id="pl3" placeholder="P/L player 3"> </span> </p>
    <p><span><input type="text" id="name4" placeholder="player 4">  <input type="float" id="pl4" placeholder="P/L player 4"> </span> </p>
    <p><span><input type="text" id="name5" placeholder="player 5">  <input type="float" id="pl5" placeholder="P/L player 5"> </span> </p>
    <button onclick="getNumbers()">Calculate!</button>
</div>

<div class="rightside">
  <p>Result<p>
  <p id="demo"></p>
  <p id="demo1"></p>
</div>

<script>
  var players;
  var numbersArray;
  function getNumbers() {
    players = [document.getElementById("name1").value, document.getElementById("name2").value, 
    document.getElementById("name3").value, document.getElementById("name4").value, 
    document.getElementById("name5").value];
    var numbers = [document.getElementById("pl1").value, document.getElementById("pl2").value, 
    document.getElementById("pl3").value, document.getElementById("pl4").value, 
    document.getElementById("pl5").value];
    numbersArray = numbers.map(Number);
    algorithm();
  }

  var result;
  function algorithm() {
    if (checkValid(numbersArray) == false) {
      document.getElementById("demo").innerHTML = "Numbers do not add up to 0, try again.";
      return;
    }
    sortNumbersNames(numbersArray, players);
    winnersDict = findWinners(players, numbersArray);
    losersDict = findLosers(players, numbersArray);
    var winnersNumbers = findWinnersArray(players, numbersArray);
    var winnersNames = findWinnersNamesArray(winnersDict, winnersNumbers);
    var losersNumbers = findLosersArray(players, numbersArray);
    var losersNames = findLosersNamesArray(losersDict, losersNumbers);
    result = calculate(winnersNames, losersNames, winnersNumbers, losersNumbers);
    display(result);
  }

  function display(result) {
    var length = Object.keys(result).length;
    var i = 0;
    var j;
    var winnerDisplay = new Array(length);
    var loserDisplay = new Array(length);
    for (var key in result) {
      winnerDisplay[i] = key;
      loserDisplay[i] = result[key];
      i++;
    }
    var ledger = new Array(winnerDisplay.length);
    var finances = document.getElementById("demo1");
    finances.innerHTML = "";
    for (j = 0; j < winnerDisplay.length; j++) {
      ledger[j] = winnerDisplay[j] + ": " + loserDisplay[j];
      finances.innerHTML += ledger[j] + "<br>";
    }
  }
  function sortNumbersNames(numbersArray, players) {
    var i;
    var j;
    var temp;
    var tempName;
    for (i = 0; i < numbersArray.length; i++) {
      for (j = i + 1; j < numbersArray.length; j++) {
        if (numbersArray[i] > numbersArray[j]) {
          temp = numbersArray[i];
          numbersArray[i] = numbersArray[j];
          numbersArray[j] = temp;
          tempName = players[i];
          players[i] = players[j];
          players[j] = tempName;
        }
      }
    }
  }

  function calculate(winnersNames, losersNames, winnersNumbers, losersNumbers) {
    var result = {};
    var i = 0;
    var j = 0;
    var loserString = [];
    while (i < losersNames.length && j < winnersNames.length) {
      if (losersNumbers[i] + winnersNumbers[j] == 0) {
        loserString.push(losersNames[i].concat(' ', -losersNumbers[i].toString(10)));
        result[winnersNames[j]] = loserString;
        loserString = [];
        i++;
        j++;
      } else if ((losersNumbers[i] + winnersNumbers[j]) < 0) {
        losersNumbers[i] = losersNumbers[i] + winnersNumbers[j];
        loserString.push(losersNames[i].concat(' ', winnersNumbers[j].toString(10)));
        result[winnersNames[j]] = loserString;
        loserString = [];
        j++;
      } else if (losersNumbers[i] + winnersNumbers[j] > 0) {
        loserString.push(losersNames[i].concat(' ', -losersNumbers[i].toString(10)));
        winnersNumbers[j] = winnersNumbers[j] + losersNumbers[i];
        i++;
      }
    }
    return result;
  }
  function findWinnersNamesArray(winnersDict, winnersNumbers) {
    var i = 0;
    var winnersNamesTwo = new Array(winnersNumbers.length);
    for (var key in winnersDict) {
      winnersNamesTwo[i] = key;
      i++
    }
    return winnersNamesTwo.reverse();
  }

  function findLosersNamesArray(losersDict, losersNumbers) {
    var i = 0;
    var losersNamesTwo = new Array(losersNumbers.length);
    for (var key in losersDict) {
      losersNamesTwo[i] = key;
      i++
    }
    return losersNamesTwo;
  }



  function checkValid(numbers) {
    var i;
    var result = 0;
    for (i = 0; i < numbers.length; i++) {
      result += numbers[i];
    }
    if (result == 0) {
      return true;
    }
    return false;
  }

  function findWinnersArray(players, numbers) {
    var i;
    var count = 0;
    for (i = 0; i < numbers.length; i++) {
      if (numbers[i] > 0) {
        count += 1;
      }
    }
    var winnersArray = numbers.splice(-count);
    return winnersArray.reverse();
  }

  function findLosersArray(players, numbers) {
    var i;
    var count = 0;
    for (i = 0; i < numbers.length; i++) {
      if (numbers[i] < 0) {
        count += 1;
      }
    }
    return numbers.slice(0,count);
  }

  function findWinners(players, numbers) {
    var i;
    var winners = {};
    for (i = 0; i < numbers.length; i++) {
      if (numbers[i] > 0) {
        winners[players[i]] = numbers[i];
      }
    }
    return winners;
  }

  function findLosers(players, numbers) {
    var i;
    var losers = {};
    for (i = 0; i < numbers.length; i++) {
      if (numbers[i] < 0) {
        losers[players[i]] = numbers[i];
      }
    }
    return losers;
  }

  </script>

</body>
</html>
